{% load static %}
{% load i18n %}
{% load hreflang %}
{% load data_analytics_tags %}
<div class="row no-gutters px-3 pt-3">
    <div class="col">
        <a class="btn btn-primary float-right" href="#" role="button">Export to PDF</a>
    </div>
</div>
<div class="row no-gutters">
    <div class="col-6">
        <table class="table table-borderless">
            <tbody>
                <tr>
                    <td style="width: 40%;">
                        <b>{% trans "Principal Investigator" %}</b>
                    </td>
                    <td style="width: 60%;">{% parse_pi_name active_project.pi %}</td>
                </tr>
                <tr>
                    <td>
                        <b>{% trans "Technical Lead" %}</b>
                    </td>
                    <td>{{ active_project.tech_lead.first_name }} {{ active_project.tech_lead.last_name }}</td>
                </tr>
                <tr>
                    <td>
                        <b>{% trans "Start Date" %}</b>
                    </td>
                    <td>{{ active_project.start_date }}</td>
                </tr>
                <tr>
                    <td>
                        <b>{% trans "End Date" %}</b>
                    </td>
                    <td>{{ active_project.end_date }}</td>
                </tr>
                <tr>
                    <td>
                        <b>{% trans "Institution" %}</b>
                    </td>
                    <td>{{ active_project.tech_lead.profile.institution }}</td>
                </tr>
                <tr>
                    <td>
                        <b>{% trans "Efficency" %}</b>
                    </td>
                    <td class="text-success">
                        {{ stats_parser.efficency|floatformat:2 }}%
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="col-6">
        <table class="table table-borderless">
            <tbody style="border-top:0;">
                <tr>
                    <td style="width: 40%;">
                        <b>{% trans "Home storage allocation" %}</b>
                    </td>
                    <td style="width: 60%;">
                        {% gb_to_tb active_project.allocation_storage_home|default_if_none:"N/A" %}
                    </td>
                </tr>
                <tr>
                    <td>
                        <b>{% trans "Scratch storage allocation" %}</b>
                    </td>
                    <td>
                        {% gb_to_tb active_project.allocation_storage_scratch|default_if_none:"N/A" %}
                    </td>
                </tr>
                <tr>
                    <td>
                        <b>{% trans "Total allocated core hours" %}</b>
                    </td>
                    <td>
                        {{ active_project.allocation_cputime|default_if_none:"N/A" }}
                    </td>
                </tr>
                <tr>
                    <td>
                        <b>{% trans "Total number of core hours" %}</b>
                    </td>
                    <td>{{ stats_parser.total_core_hours|default_if_none:0 }}</td>
                </tr>
                <tr>
                    <td>
                        <b>{% trans "Total number of CPU hours" %}</b>
                    </td>
                    <td>{{ stats_parser.total_cpu_hours|default_if_none:0 }}</td>
                </tr>
                <tr>
                    <td>
                        <b>{% trans "Total number of Slurm jobs" %}</b>
                    </td>
                    <td>{{ stats_parser.total_slurm_jobs|default_if_none:0 }}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
<div class="row no-gutters mt-4">
    <div class="col-6">
        <figure class="highcharts-figure">
            <div id="pi_projects_chart"></div>
        </figure>
    </div>
    <div class="col-6">
        <figure class="highcharts-figure">
            <div id="project_users_chart"></div>
        </figure>
    </div>
</div>
<div class="row no-gutters mb-4">
    <div class="col-6 px-3">
        <table class="table" id='pi_projects'>
            <thead>
                <tr class="text-dark text-center font-weight-bold">
                    <td></td>
                    <td>Total</td>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>
    <div class="col-6 px-3">
        <table class="table" id='user_status'>
            <thead>
                <tr class="text-dark text-center font-weight-bold">
                    <td></td>
                    <td>Total</td>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>
</div>